# Домашние задания по Автоматизации машинного обучения

Студент - Коньков Владислав Александрович РИМ 130908

### 1 лабораторная работа

Для реализации работы на python были написаны следующие скрипты:
1. data_creation.py - скрипт для скачивания датасета
и разделения на тренировачную и тестовую выборки, датасет выбран - Iris  
2. model_preprocessing.py - скрипт для предобратки данных, для предобратки испольузется StandardScaler  
3. model_preparation.py - скрипт для обучения модели, выбранная модель - LogisticRegression; модель сохраняется в файл joblib
4. model_testing.py - скрипт для тестирования модели, для оценки используется accuracy_score  

Для последовательного запуска скриптов на python был написан скрипт на bash - pipeline.sh,
в нем сначала устанавливаются нужные пакеты, а затем последовательно запускаются скрипты.  
Для удобства проверки был написан Dockerfile.

Проверить всю работоспособность можно запустив последовательно команды:   
```docker build -t test_pipeline .```  
```docker run --name test_pipeline -it test_pipeline```

### 2 лабораторная работа

Для реализации работы был создан Jenkinsfile с декларативный описанием pipeline, 
который использует скрипты python из предыдущей работы.

Также для был создан Dockerfile с кастомизацией образа для запуска скриптов на python и docker-compose файл для удобного запуска образ с jenkins.

Для проверки работоспособности нужно выполнить следующие:
1. Выполнить ```docker-compose up```
2. После запуска образа, jenkins будет доступен по адресу http://localhost:8080, 
необходимо ввести начальынй пароль(выведет в лог консоли при запуске докер образа) и установить популярные плагины.
3. Далее необходим создать любой пайплайн и скопировать скрипт из Jenkinsfile.
4. Запустить сборку пайплайна, в логах последней стадии будет выведена оценка качества модели

### 3 лабораторная работа

Для реализации работы был разработан небольшой микросервис на fastApi с использованием модели из 1 лабораторной работы.  
Для сервиса написан Dockerfile и docker-compose.  
Api представляет собой один метод для предсказания класса iris, на вход массив объектов с полями признаками, на выход массив предсказанный значений классов.  


Для проверки работоспособности:
1. Выполнить ```docker-compose up```
2. Сервис запустится по адресу http://localhost
3. Перейти в swagger по адресу - http://localhost/docs
4. Выполнить метод /iris/predict

### 4 лабораторная работа

Для этой лабораторной был настроен dvc, а также настроены скрипты python для модификации данных  

### 5 лабораторная работа

Для данной лабораторной работы был написан ноутбук и загружен в колаб по [адресу](https://colab.research.google.com/drive/1YyW0pBr58DaklRaNppAZ7utybK2HI9Zn#scrollTo=GPJOvctPTdoi).  
Также код был добавлен в репозиторий в папку lab5, для запуска нужен jupiter server.  
Для проверки можно запустить команду ```pytest``` из папки lab5.

